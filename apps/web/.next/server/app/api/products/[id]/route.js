(()=>{var e={};e.id=856,e.ids=[856],e.modules={408:()=>{},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1804:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>f,routeModule:()=>p,serverHooks:()=>y,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var a={};t.r(a),t.d(a,{GET:()=>d});var s=t(8106),o=t(8819),n=t(2050),i=t(7818),c=t(9167),u=t(2463);let d=(0,i.K)({params:u.X},async({params:e})=>{try{let r=await (0,c.G)(e.id);return Response.json(r)}catch(e){return console.error(e),new Response("Product not found",{status:404})}}),p=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"/Users/adamsmichal/Projects/commercial/movement/comparly/apps/web/src/app/api/products/[id]/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:y}=p;function f(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},2463:(e,r,t)=>{"use strict";t.d(r,{M:()=>s,X:()=>o});var a=t(6151);let s=a.z.object({page:a.z.coerce.number().min(1).default(1),pageSize:a.z.coerce.number().min(1).max(100).default(10),name:a.z.string().optional(),category:a.z.coerce.number().optional(),minPrice:a.z.coerce.number().optional(),maxPrice:a.z.coerce.number().optional(),brand:a.z.string().optional()}),o=a.z.object({id:a.z.string().regex(/^\d+$/).transform(Number)})},2523:(e,r,t)=>{"use strict";t.d(r,{z:()=>s});let a=require("@prisma/client"),s=globalThis.prisma??new a.PrismaClient({log:["query"]})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7032:()=>{},7818:(e,r,t)=>{"use strict";function a(e,r){return async function(t,a){let s={},o={};if(e.params){let r=await a.params,t=e.params.safeParse(r);t.success?o.params=t.data:s.params=t.error.flatten()}if(e.query){let r=Object.fromEntries(new URL(t.url).searchParams.entries()),a=e.query.safeParse(r);a.success?o.query=a.data:s.query=a.error.flatten()}if(e.body)try{let r=await t.json(),a=e.body.safeParse(r);a.success?o.body=a.data:s.body=a.error.flatten()}catch{s.body={formErrors:["Invalid JSON"],fieldErrors:{}}}return Object.keys(s).length>0?Response.json({error:"Validation error",issues:s},{status:400}):r(o,t,a)}}t.d(r,{K:()=>a})},9167:(e,r,t)=>{"use strict";t.d(r,{G:()=>i,Q:()=>n});var a=t(2523);let s=async({page:e,pageSize:r,name:t,category:s,minPrice:o,maxPrice:n,brand:i})=>{let c={};t&&(c.name={contains:t,mode:"insensitive"}),s&&(c.category={id:s}),o&&(c.price={gte:o}),n&&(c.price={lte:n}),i&&(c.brand={contains:i,mode:"insensitive"});let[u,d]=await Promise.all([a.z.product.findMany({where:c,skip:(e-1)*r,take:r,include:{category:!0}}),a.z.product.count({where:c})]);return{data:u,page:e,pageSize:r,total:d,totalPages:Math.ceil(d/r)}},o=async e=>a.z.product.findUnique({where:{id:e},include:{category:!0,client:!0}}),n=async({page:e,pageSize:r,name:t,category:a,minPrice:o,maxPrice:n,brand:i})=>s({page:e,pageSize:r,name:t,category:a,minPrice:o,maxPrice:n,brand:i}),i=async e=>{let r=await o(e);if(!r)throw Error("Product not found");return r}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[50,738],()=>t(1804));module.exports=a})();